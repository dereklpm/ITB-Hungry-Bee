{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapMutations, mapGetters } from 'vuex';\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      isLoading: false,\n      showPassword: false,\n      serverError: \"\",\n      serverSuccess: \"\",\n      formData: {\n        email: \"\",\n        password: \"\"\n      },\n      errors: {\n        email: \"\",\n        password: \"\"\n      }\n    };\n  },\n  computed: {\n    ...mapGetters({\n      userData: 'auth/getUser'\n    })\n  },\n  methods: {\n    ...mapActions({\n      loginAction: 'auth/login',\n      checkAuth: 'auth/checkAuth',\n      getUserData: 'auth/getUserData'\n    }),\n    ...mapMutations({\n      setUserData: 'user/setUserData'\n    }),\n    showPasswordClick() {\n      this.showPassword = !this.showPassword;\n    },\n    changeField(propertyName, value) {\n      if (this.errors[propertyName] !== \"\") {\n        this.errors[propertyName] = \"\";\n      }\n      this.formData[propertyName] = value;\n    },\n    login() {\n      this.isLoading = true;\n      this.loginAction(this.formData).then(response => {\n        var data = response.data;\n        if (data.status == \"success\") {\n          this.serverError = \"\";\n          this.serverSuccess = response.data.data;\n          this.formData.email = \"\";\n          this.formData.password = \"\";\n          localStorage.setItem(\"hungrybeeToken\", response.data.data.token);\n          this.getUserData(response.data.data.userId).then(response => {\n            const {\n              data: {\n                id,\n                firstName,\n                lastName,\n                email,\n                phoneNumber,\n                address,\n                payments\n              } = {}\n            } = response.data;\n            debugger;\n            console.log(\"setUserData\", userData);\n            this.setUserData({\n              id,\n              firstName,\n              lastName,\n              email,\n              phoneNumber,\n              address: address,\n              payments: payments\n            });\n            console.log(\"loging success\");\n            console.log(this.userData);\n            this.$router.push(\"/\");\n          });\n        } else {\n          this.serverError = data.data;\n        }\n      }).catch(error => {\n        this.serverError = error;\n        // const serverError = error.response.data;\n\n        // this.serverError = serverError.message;\n\n        // if (serverError.errors.email) {\n        //   this.errors.email = serverError.errors.email;\n        // }\n\n        // if (serverError.errors.password) {\n        //   this.errors.password = serverError.errors.password;\n        // }\n      }).finally(() => {\n        this.isLoading = false;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAwCA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;QACAF;QACAC;MACA;IACA;EACA;EACAE;IACA;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;IAEA;MACAC;IACA;IAEAC;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MAGA,gCACAC;QACA;QACA;UACA;UACA;UAEA;UACA;UACAC;UACA,4CACAD;YACA;cAAAnB;gBAAAqB;gBAAAC;gBAAAC;gBAAAjB;gBAAAkB;gBAAAC;gBAAAC;cAAA;YAAA;YAEA;YACAC;YACA;cACAN;cACAC;cACAC;cACAjB;cACAkB;cACAC;cACAC;YACA;YAEAC;YACAA;YACA;UACA;QACA,OACA;UACA;QACA;MACA,GACAC;QACA;QACA;;QAEA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;MACA,GACAC;QACA;MACA;IACA;EACA;AACA","names":["name","data","isLoading","showPassword","serverError","serverSuccess","formData","email","password","errors","computed","userData","methods","loginAction","checkAuth","getUserData","setUserData","showPasswordClick","changeField","login","then","localStorage","id","firstName","lastName","phoneNumber","address","payments","console","catch","finally"],"sourceRoot":"src/pages/Auth","sources":["LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <h1 class=\"login__name\">Login</h1>\n    <p class=\"login__text\">\n      Sign in with your data that you entered during your registration.\n    </p>\n\n    <BaseAlert v-if=\"!!serverError\" class=\"login__alert\" variant=\"danger\" :message=\"serverError\" />\n\n    <!-- <BaseAlert\n      v-if=\"!!serverSuccess\"\n      class=\"login__alert\"\n      variant=\"success\"\n      :message=\"serverSuccess\"\n    /> -->\n    <!-- ========Base inputs========= -->\n    <BaseInput label=\"Email\" type=\"email\" :value=\"formData.email\" :error=\"errors.email\"\n      @onInput=\"(value) => changeField('email', value)\" />\n\n    <BaseInput class=\"login__baseInput\" label=\"Password\" type=\"password\" :value=\"formData.password\"\n      :showPassword=\"showPassword\" :error=\"errors.password\" @onPasswordToggle=\"showPasswordClick\"\n      @onInput=\"(value) => changeField('password', value)\" />\n\n    <!-- ===========Base button========== -->\n    <BaseButton variant=\"primary\" class=\"login__baseBtn\" @onClick=\"login\" :loading=\"isLoading\">\n      Login\n    </BaseButton>\n\n    <router-link to=\"/auth/forgot-password\" class=\"login__forgotLink\">Forgot password</router-link>\n\n    <div class=\"login__subText\">\n      <p>\n        Don`t have an account?<router-link to=\"/auth/sign\" class=\"login__link\">\n          Sign up</router-link>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapMutations, mapGetters } from 'vuex';\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      isLoading: false,\n      showPassword: false,\n      serverError: \"\",\n      serverSuccess: \"\",\n      formData: {\n        email: \"\",\n        password: \"\",\n      },\n      errors: {\n        email: \"\",\n        password: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapGetters({\n      userData: 'auth/getUser'\n    })\n  },\n  methods: {\n    ...mapActions({\n      loginAction: 'auth/login',\n      checkAuth: 'auth/checkAuth',\n      getUserData: 'auth/getUserData'\n    }),\n\n    ...mapMutations({\n      setUserData: 'user/setUserData'\n    }),\n\n    showPasswordClick() {\n      this.showPassword = !this.showPassword;\n    },\n    changeField(propertyName, value) {\n      if (this.errors[propertyName] !== \"\") {\n        this.errors[propertyName] = \"\";\n      }\n      this.formData[propertyName] = value;\n    },\n    login() {\n      this.isLoading = true;\n\n\n      this.loginAction(this.formData)\n        .then((response) => {\n          var data = response.data;\n          if (data.status == \"success\") {\n            this.serverError = \"\";\n            this.serverSuccess = response.data.data;\n\n            this.formData.email = \"\";\n            this.formData.password = \"\";\n            localStorage.setItem(\"hungrybeeToken\", response.data.data.token);\n            this.getUserData(response.data.data.userId)\n              .then(response => {\n                const { data: { id, firstName, lastName, email, phoneNumber, address, payments } = {} } = response.data;\n\n                debugger;\n      console.log(\"setUserData\", userData)\n                this.setUserData({\n                  id,\n                  firstName,\n                  lastName,\n                  email,\n                  phoneNumber,\n                  address: address,\n                  payments: payments\n                })\n\n                console.log(\"loging success\")\n                console.log(this.userData)\n                this.$router.push(\"/\");\n              })\n          }\n          else {\n            this.serverError = data.data;\n          }\n        })\n        .catch((error) => {\n          this.serverError = error;\n          // const serverError = error.response.data;\n\n          // this.serverError = serverError.message;\n\n          // if (serverError.errors.email) {\n          //   this.errors.email = serverError.errors.email;\n          // }\n\n          // if (serverError.errors.password) {\n          //   this.errors.password = serverError.errors.password;\n          // }\n        })\n        .finally(() => {\n          this.isLoading = false;\n        })\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n/* FORM*/\n.login {\n  width: 50%;\n  margin: 0 auto;\n  // position: absolute;\n  // top: 50%;\n  // left: 50%;\n  // transform: translateX(-50%) translateY(-50%);\n\n  &__alert {\n    margin-bottom: 16px;\n  }\n\n  &__name {\n    color: $color-dark;\n    font-size: 32px;\n    line-height: 82px;\n    font-family: $base-font;\n    font-weight: 700;\n    letter-spacing: 0.1px;\n  }\n\n  &__text {\n    display: none;\n  }\n\n  &__baseInput {\n    margin-bottom: 28px !important;\n  }\n\n  &__baseCheckbox {\n    margin-bottom: 40px;\n  }\n\n  &__baseBtn {\n    width: 100%;\n    margin-bottom: 35px;\n  }\n\n  &__forgotLink {\n    color: $color-primary;\n    display: block;\n    font-family: $base-font;\n    font-weight: 700;\n    font-size: 14px;\n    line-height: 20px;\n    text-align: center;\n    margin-bottom: 110px;\n\n    &:hover {\n      color: $color-primary;\n    }\n  }\n\n  &__subText {\n    color: $color-dark;\n    font-family: $base-font;\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 20px;\n    text-align: center;\n  }\n\n  &__link {\n    font-size: 14px;\n    color: $color-primary;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .login {\n    transform: translateX(-50%) translateY(-40%);\n    width: 95%;\n\n    &__name {\n      font-size: 60px;\n    }\n\n    &__text {\n      display: block;\n      color: $color-grey-dark;\n      font-family: $base-font;\n      font-weight: 400;\n      font-size: 14px;\n      margin-bottom: 45px;\n      line-height: 20px;\n      letter-spacing: 0.1px;\n    }\n\n    &__link {\n      padding-bottom: 32px;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}