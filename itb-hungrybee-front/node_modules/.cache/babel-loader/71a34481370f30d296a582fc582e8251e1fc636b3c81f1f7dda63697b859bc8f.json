{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapMutations, mapGetters, mapActions } from \"vuex\";\nexport default {\n  name: \"AccountPage\",\n  data() {\n    return {\n      isEditing: false,\n      isLoading: false,\n      formData: {\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        phoneNumber: \"\",\n        address: \"\",\n        cardnum: \"\",\n        holder: \"\",\n        expiry: \"\",\n        type: \"\",\n        cvv: \"\"\n      },\n      errors: {\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        phoneNumber: \"\"\n      }\n    };\n  },\n  computed: {\n    ...mapGetters({\n      userData: \"auth/getUser\"\n    })\n  },\n  mounted() {\n    this.initPage();\n  },\n  methods: {\n    ...mapMutations({\n      logoutUser: \"auth/logout\"\n    }),\n    ...mapActions({\n      checkAuth: \"auth/checkAuth\",\n      updateUser: \"auth/updateUser\"\n    }),\n    initPage() {\n      console.log(\"accoun init\");\n      console.log(this.userData);\n      this.formData.firstName = this.userData.firstName;\n      this.formData.lastName = this.userData.lastName;\n      this.formData.email = this.userData.email;\n      this.formData.phoneNumber = this.userData.phoneNumber;\n      this.formData.address = this.userData.address;\n      if (this.userData.payment) {\n        this.formData.cardnum = this.userData.payment.cardnum;\n        this.formData.holder = this.userData.payment.holder;\n        this.formData.expiry = this.userData.payment.expiry;\n        this.formData.type = \"Visa\";\n        this.formData.cvv = this.userData.payment.cvv;\n      }\n    },\n    cancelEditing() {\n      this.isEditing = false;\n      this.initPage();\n    },\n    changeField(propertyName, value) {\n      console.log(\"changeField\");\n      if (this.errors[propertyName] !== \"\") {\n        this.errors[propertyName] = \"\";\n      }\n      this.formData[propertyName] = value;\n    },\n    saveChangeClick() {\n      this.isLoading = true;\n      var userId = this.userData.id;\n      var payload = this.formData;\n      payload.userId = userId;\n      this.updateUser(payload).then(resp => {\n        this.checkAuth().then(resp => {\n          this.initPage();\n          this.isLoading = false;\n          this.isEditing = false;\n        });\n      });\n    },\n    logout() {\n      this.logoutUser();\n      this.$router.push(\"/\");\n    }\n  }\n};","map":{"version":3,"mappings":";AA0EA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAV;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAQ;IACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;MACAC;IACA;IACA;MACAC;MACAC;IACA;IACAC;MACAC;MACAA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACAF;MACA;QACA;MACA;MAEA;IACA;IACAG;MACA;MAEA;MACA;MACAC;MACA,yBACAC;QACA,iBACAA;UACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;AACA","names":["name","data","isEditing","isLoading","formData","firstName","lastName","email","phoneNumber","address","cardnum","holder","expiry","type","cvv","errors","computed","userData","mounted","methods","logoutUser","checkAuth","updateUser","initPage","console","cancelEditing","changeField","saveChangeClick","payload","then","logout"],"sourceRoot":"src/pages/Profile","sources":["AccountPage.vue"],"sourcesContent":["<template>\n  <div>\n    <h3 class=\"profile__name\">Account</h3>\n    <div class=\"account__info\">\n      <h2 class=\"account__title\">Personal information</h2>\n      <p class=\"account__text\">Avatar</p>\n      <div class=\"account__action\">\n        <img class=\"account__img\" src=\"@/assets/profile/blank-profile-picture.jpg\" />\n\n      </div>\n\n      <div class=\"account__input\">\n        <BaseInput label=\"First name\" :value=\"formData.firstName\" :error=\"errors.firstName\"\n          :disabled=\"!isEditing || isLoading\" @onInput=\"(value) => changeField('firstName', value)\" />\n\n        <BaseInput label=\"Last name\" :value=\"formData.lastName\" :error=\"errors.lastName\"\n          :disabled=\"!isEditing || isLoading\" @onInput=\"(value) => changeField('lastName', value)\" />\n\n        <BaseInput label=\"Email\" :value=\"formData.email\" :error=\"errors.email\" :disabled=\"!isEditing || isLoading\"\n          @onInput=\"(value) => changeField('email', value)\" />\n\n        <BaseInput label=\"Phone number\" :value=\"formData.phoneNumber\" :error=\"errors.phoneNumber\"\n          :disabled=\"!isEditing || isLoading\" @onInput=\"(value) => changeField('phoneNumber', value)\" />\n      </div>\n\n      <div class=\"profile-form-divider\"></div>\n      <h2 class=\"account__title\">Address</h2>\n\n      <div class=\"account_input2\">\n        <BaseInput :value=\"formData.address\" :error=\"errors.address\" :disabled=\"!isEditing || isLoading\"\n          @onInput=\"(value) => changeField('address', value)\" />\n      </div>\n      <div class=\"profile-form-divider\"></div>\n\n      <h2 class=\"account__title\">Payment</h2>\n\n      <div class=\"account_input2\">\n        <BaseInput label=\"Card Number\" :value=\"formData.cardnum\" :error=\"errors.cardnum\"\n          :disabled=\"!isEditing || isLoading\" @onInput=\"(value) => changeField('cardnum', value)\" />\n\n        <BaseInput label=\"Card Holder Name\" :value=\"formData.holder\" :error=\"errors.holder\"\n          :disabled=\"!isEditing || isLoading\" @onInput=\"(value) => changeField('holder', value)\" />\n      </div>\n\n      <div class=\"account__input\">\n        <BaseInput label=\"Expiry Date\" :value=\"formData.expiry\" :error=\"errors.expiry\" :disabled=\"!isEditing || isLoading\"\n          @onInput=\"(value) => changeField('expiry', value)\" />\n\n        <BaseInput label=\"CVV\" :value=\"formData.cvv\" :error=\"errors.cvv\" :disabled=\"!isEditing || isLoading\"\n          @onInput=\"(value) => changeField('cvv', value)\" />\n      </div>\n\n\n      <div class=\"profile-form-divider\"></div>\n\n      <div class=\"account__btns\">\n        <BaseButton class=\"account__btns-dangerBtn\" variant=\"danger-outline\" @onClick=\"logout\">Log out</BaseButton>\n        <div>\n          <BaseButton v-if=\"isEditing\" class=\"SaveBtn\" @onClick=\"saveChangeClick\" :loading=\"isLoading\">Save changes\n          </BaseButton>\n\n          <BaseButton v-if=\"isEditing\" class=\"account__btns-discardBtn\" @onClick=\"cancelEditing\">\n            Cancel\n          </BaseButton>\n          <BaseButton v-else variant=\"primary-outline\" @onClick=\"isEditing = true\">\n            Change\n          </BaseButton>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations, mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  name: \"AccountPage\",\n  data() {\n    return {\n      isEditing: false,\n      isLoading: false,\n      formData: {\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        phoneNumber: \"\",\n        address: \"\",\n        cardnum: \"\",\n        holder: \"\",\n        expiry: \"\",\n        type: \"\",\n        cvv: \"\"\n      },\n      errors: {\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        phoneNumber: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapGetters({\n      userData: \"auth/getUser\",\n    }),\n  },\n  mounted() {\n    this.initPage();\n  },\n  methods: {\n    ...mapMutations({\n      logoutUser: \"auth/logout\",\n    }),\n    ...mapActions({\n      checkAuth: \"auth/checkAuth\",\n      updateUser: \"auth/updateUser\"\n    }),\n    initPage() {\n      console.log(\"accoun init\")\n      console.log(this.userData)\n      this.formData.firstName = this.userData.firstName;\n      this.formData.lastName = this.userData.lastName;\n      this.formData.email = this.userData.email;\n      this.formData.phoneNumber = this.userData.phoneNumber;\n      this.formData.address = this.userData.address;\n      if (this.userData.payment) {\n        this.formData.cardnum = this.userData.payment.cardnum;\n        this.formData.holder = this.userData.payment.holder;\n        this.formData.expiry = this.userData.payment.expiry;\n        this.formData.type = \"Visa\";\n        this.formData.cvv = this.userData.payment.cvv;\n      }\n    },\n    cancelEditing() {\n      this.isEditing = false;\n      this.initPage();\n    },\n    changeField(propertyName, value) {\n      console.log(\"changeField\")\n      if (this.errors[propertyName] !== \"\") {\n        this.errors[propertyName] = \"\";\n      }\n\n      this.formData[propertyName] = value;\n    },\n    saveChangeClick() {\n      this.isLoading = true;\n\n      var userId = this.userData.id;\n      var payload = this.formData;\n      payload.userId = userId;\n      this.updateUser(payload)\n        .then(resp => {\n          this.checkAuth()\n            .then(resp => {\n              this.initPage();\n              this.isLoading = false;\n              this.isEditing = false;\n            })\n        })\n    },\n    logout() {\n      this.logoutUser();\n      this.$router.push(\"/\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.account {\n  &__info {\n    background: $color-white;\n    border: 1px solid $color-grey-lightest;\n    border-radius: 16px;\n    padding: 16px;\n    margin-bottom: 24px;\n    // height: 100vh;\n  }\n\n  &__title {\n    font-family: $base-font;\n    font-weight: 700;\n    font-size: 18px;\n    line-height: 24px;\n    letter-spacing: 0.1px;\n    margin-bottom: 16px;\n    color: $color-dark;\n  }\n\n  &__text {\n    font-family: $base-font;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 16px;\n    margin-bottom: 8px;\n    color: $color-grey-dark;\n  }\n\n  &__action {\n    display: flex;\n    align-items: center;\n    margin-bottom: 16px;\n  }\n\n  &__img {\n    cursor: pointer;\n    border-radius: 12px;\n    margin-right: 24px;\n    width: 76px;\n    height: 76px;\n  }\n\n  &__input {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 16px;\n    margin-bottom: 15px;\n  }\n\n  &__input2 {\n    gap: 16px;\n    margin-bottom: 15px;\n  }\n\n  &__btns {\n    display: flex;\n    justify-content: space-between;\n\n    &-discardBtn {\n      margin-right: 16px;\n    }\n\n    .SaveBtn {\n      min-width: 120px;\n      margin-right: 20px;\n    }\n  }\n}\n\n.profile-notifications {\n  &__wrapper {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 24px 16px;\n    margin-bottom: 36px;\n  }\n}\n\n.profile-form-divider {\n  margin-top: 20px;\n  margin-bottom: 20px;\n  height: 1px;\n  width: 100%;\n  background-color: $color-grey-light;\n}\n\n@media screen and (max-width: 768px) {\n  .account {\n    &__input {\n      grid-template-columns: 1fr;\n    }\n\n    &__btns {\n      flex-direction: column;\n\n      div {\n        &:nth-child(2) {\n          display: flex;\n          justify-content: space-between;\n        }\n\n        button {\n          width: 100%;\n        }\n      }\n\n      &-dangerBtn {\n        margin-bottom: 40px;\n      }\n    }\n  }\n\n  .profile-notifications {\n    &__wrapper {\n      grid-template-columns: 1fr;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}