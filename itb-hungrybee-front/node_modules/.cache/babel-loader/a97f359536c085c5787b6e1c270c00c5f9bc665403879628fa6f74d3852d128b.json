{"ast":null,"code":"import client from \"../../api\";\nimport { Buffer } from \"buffer\";\nexport default {\n  namespaced: true,\n  state: {\n    isAuthenticated: false,\n    userData: null\n  },\n  actions: {\n    signUp(ctx, payload) {\n      payload.password = Buffer.from(payload.password).toString('base64');\n      return client.post(\"/api/account/signUp\", payload).then(resp => {\n        return resp;\n      });\n    },\n    checkAuth(ctx) {\n      console.log(\"checkAuth: \" + localStorage.getItem(\"hungrybeeToken\"));\n      return client.post(\"/api/account/auth\", {}, {\n        headers: {\n          \"hbtoken\": localStorage.getItem(\"hungrybeeToken\")\n        }\n      }).then(response => {\n        console.log(\"checkAuth:\");\n        console.log(response);\n        ctx.commit('setUserData', response.data.data);\n        ctx.commit('setAuthentication', true);\n        return response;\n      });\n    },\n    login(ctx, payload) {\n      // payload = { email: \"ctm@gmail.com\", password: \"1234\" }\n      payload.password = Buffer.from(payload.password).toString('base64');\n      return client.post(\"/api/account/signIn\", payload).then(response => {\n        console.log(\"signIn\");\n        console.log(response.data);\n        if (response.data.status == \"success\") {\n          ctx.commit('setAuthentication', true);\n        } else {\n          ctx.commit('setAuthentication', false);\n        }\n        return response;\n      });\n    },\n    getUserData(ctx, userId) {\n      return client.post(`/api/account/${userId}`).then(response => {\n        return response;\n      });\n    },\n    updateUser(ctx, payload) {\n      var userId = payload.userId;\n      return client.put(`/api/account/${userId}`, payload).then(resp => {\n        return resp;\n      });\n    }\n  },\n  mutations: {\n    setUserData(state, userData) {\n      state.userData = userData;\n    },\n    setAuthentication(state, value) {\n      state.isAuthenticated = value;\n    },\n    logout(state) {\n      state.isAuthenticated = false;\n      localStorage.removeItem(\"hungrybeeToken\");\n    }\n  },\n  getters: {\n    isAuth(state) {\n      return state.isAuthenticated;\n    },\n    getUser(state) {\n      return state.userData;\n    }\n  }\n};","map":{"version":3,"names":["client","Buffer","namespaced","state","isAuthenticated","userData","actions","signUp","ctx","payload","password","from","toString","post","then","resp","checkAuth","console","log","localStorage","getItem","headers","response","commit","data","login","status","getUserData","userId","updateUser","put","mutations","setUserData","setAuthentication","value","logout","removeItem","getters","isAuth","getUser"],"sources":["/Users/dereklee/Project/itb-hungrybee-front/src/store/modules/auth.js"],"sourcesContent":["import client from \"../../api\";\nimport { Buffer } from \"buffer\";\n\nexport default {\n  namespaced: true,\n  state: {\n    isAuthenticated: false,\n    userData: null\n  },\n\n  actions: {\n    signUp(ctx, payload) {\n      payload.password = Buffer.from(payload.password).toString('base64');\n      return client.post(\"/api/account/signUp\", payload)\n        .then(resp => {\n          return resp\n        })\n    },\n    checkAuth(ctx) {\n      console.log(\"checkAuth: \" + localStorage.getItem(\"hungrybeeToken\"))\n      return client.post(\"/api/account/auth\", {}, {\n        headers: {\n          \"hbtoken\": localStorage.getItem(\"hungrybeeToken\")\n        }\n      })\n        .then((response) => {\n          console.log(\"checkAuth:\")\n          console.log(response);\n          ctx.commit('setUserData', response.data.data)\n          ctx.commit('setAuthentication', true)\n\n          return response\n        })\n    },\n    login(ctx, payload) {\n      // payload = { email: \"ctm@gmail.com\", password: \"1234\" }\n      payload.password = Buffer.from(payload.password).toString('base64');\n      return client.post(\"/api/account/signIn\", payload)\n        .then((response) => {\n          console.log(\"signIn\")\n          console.log(response.data);\n          if (response.data.status == \"success\") {\n            ctx.commit('setAuthentication', true)\n          }\n          else {\n            ctx.commit('setAuthentication', false)\n          }\n\n          return response\n        })\n    },\n    getUserData(ctx, userId) {\n      return client.post(`/api/account/${userId}`)\n        .then((response) => {\n          return response\n        })\n    },\n    updateUser(ctx, payload) {\n      var userId = payload.userId;\n      return client.put(`/api/account/${userId}`, payload)\n        .then(resp => {\n          return resp;\n        })\n    }\n  },\n\n  mutations: {\n    setUserData(state, userData) {\n      state.userData = userData\n    },\n\n    setAuthentication(state, value) {\n      state.isAuthenticated = value\n    },\n\n    logout(state) {\n      state.isAuthenticated = false\n      localStorage.removeItem(\"hungrybeeToken\");\n    }\n  },\n\n  getters: {\n    isAuth(state) {\n      return state.isAuthenticated\n    },\n    getUser(state) {\n      return state.userData\n    }\n  },\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}